# KarplusSynth

KarplusSynth — это синтезатор на основе алгоритма Карплуса–Стронга, реализованный на C++.  
Программа воспроизводит звук синтезированных струн в реальном времени с помощью PortAudio,  
а также поддерживает сохранение в WAV-файл через libsndfile.

## Как это работает

1. **Инициализация струны**  
   Для каждой заданной частоты создаётся кольцевой буфер, заполненный случайным шумом. Это имитирует удар по струне.

2. **Алгоритм затухающих колебаний**  
   На каждом шаге берётся среднее значение двух соседних элементов буфера и записывается обратно с небольшим коэффициентом затухания (например, `0.996`).  
   Таким образом формируется колебание, которое постепенно затухает, как у реальной струны.

3. **Синтез нот**  
   - Пользователь вводит параметры: частоту дискретизации, длительность ноты и список частот.  
   - Для каждой частоты программа генерирует ноту методом Карплуса–Стронга.  
   - Все ноты последовательно объединяются в итоговый звуковой поток.

4. **Вывод звука и запись**  
   - В реальном времени звук воспроизводится через **PortAudio**.  
   - Параллельно сигнал конвертируется в `int16` и сохраняется в WAV-файл с помощью **libsndfile**.  
   - Имя файла генерируется автоматически на основе текущей даты и времени (например, `output_20250317_212045.wav`).

Таким образом, программа позволяет **синтезировать “струнные” звуки в реальном времени и сохранять их в виде аудиофайлов**.
